<!DOCTYPE html>
<html>
<head>
    <title>Encuesta Docente</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>
    <h1>Selecciona un docente y semestre</h1>
    <form action="/encuesta" method="POST">
        <label>Docente:</label>
        <select name="id_docente" id="id_docente" required onchange="cargarSemestres()">
            {% for d in docentes %}
            <option value="{{d.id_docente}}">{{d.nombre}} {{d.apellidop}} {{d.apellidom}}</option>
            {% endfor %}
        </select>
        <br><br>
        <label>Semestre:</label>
        <select name="id_semestre" id="id_semestre" required>
        </select>
        <br><br>
        <button type="submit">Comenzar Encuesta</button>
    </form>
    <div style="text-align:center; margin-top:20px;">
        <a href="{{ url_for('logout') }}" style="color:#eb2525;">Cerrar sesi√≥n</a>
    </div>
    <script>
    function cargarSemestres() {
        var docenteId = document.getElementById('id_docente').value;
        fetch('/semestres/' + docenteId)
            .then(response => response.json())
            .then(data => {
                var select = document.getElementById('id_semestre');
                select.innerHTML = '';
                data.forEach(function(s) {
                    var option = document.createElement('option');
                    option.value = s.id_semestre;
                    option.text = 'Semestre ' + s.numero + ' - ' + s.materia;
                    select.appendChild(option);
                });
            });
    }
    window.onload = cargarSemestres;
    </script>
</body>
</html>
